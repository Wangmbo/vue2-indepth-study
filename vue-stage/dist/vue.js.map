{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/observer/array.js","../src/observer/dep.js","../src/observer/index.js","../src/observer/schedular.js","../src/observer/watcher.js","../src/state.js","../src/compiler/parse.js","../src/compiler/generate.js","../src/compiler/index.js","../src/vdom/patch.js","../src/lifecycle.js","../src/init.js","../src/vdom/index.js","../src/render.js","../src/index.js"],"sourcesContent":["/*\n * @Descripttion: \n * @version: \n * @Author: \n * @Date: 2022-03-07 01:13:42\n * @LastEditors: \n * @LastEditTime: 2022-04-02 00:08:59\n */\nexport function isFuntion(data) {\n  return typeof data === 'function'\n}\n\nexport function isObject(val) {\n  return typeof val === 'object' && val != null\n}\n\nfunction flushCallBacks() {\n  callbacks.forEach(cb => cb())\n  watting = false\n}\nconst callbacks = []\nlet watting = false\n\nfunction timerFn() {}\n\nif(Promise) {\n  timerFn = () => {\n    Promise.resolve().then(flushCallBacks)\n  }\n} else if (MutationObserver) {\n  let textNode = document.createTextNode(1)\n  let observe = new MutationObserver(flushCallBacks)\n  observe.observe(textNode, {\n    characterData: true\n  })\n\n  timerFn = () => {\n    textNode.textContent = 3\n  }\n  // 微任务\n} else if (setImmediate) {\n  timerFn = () => {\n    setImmediate(flushCallBacks)\n  }\n} else {\n  timerFn = () => {\n    setTimeout(flushCallBacks)\n  }\n}\n\nexport function nextTick(cb) {\n  callbacks.push(cb)\n  if(!watting) {\n    // TODO 这里面到底用啥比较好\n    // vue2 考虑了兼容性问题\n    // vue3 直接用的Promise\n    timerFn()\n    watting = true\n  }\n}\n\n// TODO 异步更新原理 记录nextTick 原理\n\n// TODO 微任务是在页面渲染前执行，但是我取的是内存中的dom，不关心你渲染完毕没有\n// dom树已经更新了...\n// Promise.then\n\n// 明天整理归纳\n// TODO ","export let arrayMethods = Object.create(Array.prototype)\n\nlet oldArrayPrototype = Array.prototype\n\nlet methods = ['push', 'shift', 'pop', 'unshift', 'reverse', 'splice', 'sort']\n\nmethods.forEach(method => {\n  arrayMethods[method] = function(...args) {\n    console.log('数组发生变化...')\n    // TODO 如果是push了一个对象之类的，也需要劫持...\n    const result = oldArrayPrototype[method].call(this, ...args)\n    // 如果有新增，我们要监控的是数组的每一项，而不是数组\n    let addList\n    switch (method) {\n      case 'push': \n      case 'unshift':\n        addList = args\n        break;\n      case 'splice':\n        addList = args.concat(2)\n        break;\n      default:\n    }\n    if(addList) this.__ob__.observeArray(addList)\n    // TODO 梳理关系\n    // 数组的 observer.dep 属性\n    // 为什么数组要有dep \n    // 因为调用方法时 数组更新 需要 调用dep的notify更新数据...\n    // 给数组配置一个dep ,让dep记住这个watcher 数组一旦变化 让这个watcher 更新.\n    this.__ob__.dep.notify()\n\n    return result\n  }\n})","/*\n * @Descripttion: \n * @version: \n * @Author: \n * @Date: 2022-03-16 22:10:33\n * @LastEditors: Please set LastEditors\n * @LastEditTime: 2022-03-30 16:56:30\n */\nlet id = 0;\nexport default class Dep {  // 每个属性都分配一个dep， dep可以存放watcher，watcher还要存放这个dep\n  constructor() {\n    this.id = id++\n    this.subs = [] //用来存放watcher\n  }\n\n  depend() {\n    if(Dep.target) {\n      Dep.target.addDep(this)\n    }\n    // Dep.target dep\n  }\n  addSub(watcher) {\n    this.subs.push(watcher)\n  }\n  notify() {\n    // TODO 会被多次更新...\n    this.subs.forEach(item => {\n      item.update()\n    })\n  }\n}\nDep.target = null\nexport function pushTarget(watcher) {\n  Dep.target = watcher\n}\n\nexport function popTarget() {\n  Dep.target = null\n}\n\n\n// TODO watcher 和 dep 之间的关系...\n// 依赖和watcher之间的关系\n// 依赖和收集依赖\n// 多对多的关系..","/*\n * @Descripttion: \n * @version: \n * @Author: \n * @Date: 2022-03-07 01:18:16\n * @LastEditors: \n * @LastEditTime: 2022-03-27 12:22:27\n */\nimport { isObject } from \"../utils\";\nimport { arrayMethods } from './array'\nimport Dep from \"./dep\";\n\n// 如果数据是对象 会将对象不停地递归 进行劫持\n// 如果是数组， 会劫持数组的方法，并对数组中不是基本数据类型的进行检测\n\n// 如果给对象新增一个属性不会触发视图更新 $set 给对象本身也增加一个watcher 如果增加一个属性后，我就手动的触发watcher的更新\nclass Observe {\n  constructor(data) { // 对对象中的所有属性进行劫持\n    this.dep = new Dep() // 数据可能是数组或者对象\n\n    Object.defineProperty(data, '__ob__', {\n      value: this,\n      enumerable: false\n    })\n    // data.__ob__ = this\n    if(Array.isArray(data)) { // 数组的变化可以触发视图更新\n      // 数组劫持的逻辑\n      // 核心思想是对数组的方法进行劫持\n      // 对数组原来的方法进行改写，切片编程 高阶函数\n      data.__proto__ = arrayMethods\n\n      this.observeArray(data)\n    } else {\n      this.walk(data)\n    }\n  }\n  // 循环遍历劫持...\n  walk(data) { // 对象\n    Object.keys(data).forEach((key) => {\n      defineReactive(data, key, data[key])\n    })\n  }\n\n  observeArray(data) {\n    data.forEach(item => {\n      observe(item)\n    })\n  }\n}\n\nfunction dependArray(value) {\n  value.forEach(item => {\n    item.__ob__&&item.__ob__.dep&&item.__ob__.dep.depend()\n    if(Array.isArray(item)) dependArray(item)\n  })\n}\n\nfunction defineReactive(data, key, value) {\n  const childOb = observe(value)\n  // TODO Object.defineProperties\n  let dep = new Dep() // 每个属性都有一个dep属性\n  Object.defineProperty(data, key, {\n    get() {\n      // 取值时我希望将watcher和dep对应起来\n      // Dep.target\n      if(Dep.target) { // 此值是在模板中取值的\n        dep.depend() // 让dep\n\n        if(childOb) { // 可能是对象可能是数组，对象也要收集依赖，$set\n          // 设置值的时候\n          childOb.dep.depend() // 让数组和对象也记录watcher\n          if(Array.isArray(value)) {\n            dependArray(value)\n          }\n        }\n      }\n      return value\n    },\n    set(val) {\n      if(val ===  value) return\n      observe(value) // 如果用户赋值了一个新对象， 需要对这个新对象进行劫持\n      value = val\n      dep.notify() // 通知dep属性更新\n    }\n  })\n}\n\n// import { isObject } from '../utils'\nexport function observe(data) {\n  if(data.__ob__) return data.__ob__\n  // 如果是对象才观测\n  if(!isObject(data)) return\n  // if(!isObject(data)) return\n  return new Observe(data)\n}\n// vue2 没有对数组进行索引的劫持\n// 而且一般用户很少通过索引去操作数组.\n// 内部就想到不对索引进行拦截，因为消耗严重.\n// 数组没有监控索引的变化，但是索引对应的内容是对象类型，需要被监控\n\n// 重写了push shift pop unshift reverse sort splice\n// 这几个方法","/*\n * @Descripttion: \n * @version: \n * @Author: \n * @Date: 2022-03-21 21:34:43\n * @LastEditors: Please set LastEditors\n * @LastEditTime: 2022-03-30 22:31:37\n */\nimport { nextTick } from \"../utils\"\n\nlet queue = []\nlet has = {} // 做列表维护 存放了哪些watcher\nlet pedding = false\nfunction flushSchedulerQueue() {\n  queue.forEach(item => {\n    item.run()\n  })\n  queue = []\n  has = {}\n  pedding = false\n}\n// 同一个watcher\n// 多次dep修改只会执行更新一次\nexport function queueWacther(watcher) { // 当前执行栈中代码执行完毕后，会先清空微任务，再清空宏任务，我希望更早的渲染\n  const id = watcher.id\n  if(!has[id]) {\n    queue.push(watcher)\n    has[id] = true\n  }\n\n  if(!pedding) {\n    // 数据更新完毕之后拿到最新的dom内容\n    // 如果用户不停的写定时器，会开启多个线程\n    nextTick(flushSchedulerQueue, 0)\n    // setTimeout(flushSchedulerQueue, 0)\n    pedding = true\n  }\n}\n\n// 使用setTimeout","import { popTarget, pushTarget } from \"./dep\"\nimport { queueWacther } from \"./schedular\"\n\nlet id = 0\nclass Watcher {\n  constructor(vm, exprOrFn, cb, options) {\n    this.vm = vm\n    this.cb = cb\n    this.options = options\n    this.id = id++\n    // 默认执行\n    // this.exprOrFn() // 生成render\n    if(typeof exprOrFn === 'string') {\n      this.getter = function() {\n        console.log(exprOrFn, 'exprOrFn..')\n        const result = exprOrFn.split('.').reduce((total, cur) => {\n          return total = total[cur]\n        }, this.vm)\n        // debugger\n        return result\n      }\n       \n    } else {\n     this.getter = exprOrFn  \n    }\n    this.deps = []\n    this.depsId = new Set()\n    this.get()\n  }\n  // 用户更新时重新调用getter方法\n  get() {\n    //  defineProperty.get\n    //  每个属性都可以收集自己的watcher\n    // 我希望一个属性可以对应多个watcher 同时一个watcher对应多个属性\n    pushTarget(this)\n    // 每一个组件都有一个watcher 组件渲染之前会建立这个watcher 并且将属性的依赖和该watcher关联起来\n    const value = this.getter()\n\n    popTarget()\n\n    return value\n  }\n  run() {\n    const newVal = this.get()\n    console.log(this.options.user, 'this.options.user')\n    if(this.options.user) {\n      this.cb.call(this, this.value, newVal)\n      this.value = newVal\n    }\n  }\n  update() {\n    // 多次调用update 我希望将wathcer缓存下来，等一会一起更新\n    queueWacther(this)\n  }\n  addDep(dep) {\n    const id = dep.id\n    if(!this.depsId.has(id)) {\n      this.depsId.add(id)\n      this.deps.push(dep)\n      // 如果该watcher没收集过该dep,那么dep也要反向手机watcher\n      dep.addSub(this)\n    }\n  }\n}\n\n// 明天抽时间整理\n// watcher 和 dep\n// 我们将更新的功能封装了一个watcher\n// 渲染页面前，会将当前watcher放到Dep类上\n// 在vue中页面渲染时使用的属性，需要进行依赖收集，收集对象的渲染watcher\n// 取值时，给每个属性都加了个dep属性，用于存储这个渲染watcher（同一个watcher会对应多个dep）\n// 每个属性可能对应多个视图（多个视图肯定是多个watcher），一个属性要对应多个watcher\n// dep.depend () => 通知dep存放watcher => Dep.target.addDep() 通知watcher 存放dep\n// 双向存储\n\n// TODO 逻辑过一遍..\n\n// TODO 多次更新只走一次...\n\nexport default Watcher","/*\n * @Descripttion: \n * @version: \n * @Author: \n * @Date: 2022-03-07 01:07:15\n * @LastEditors: Please set LastEditors\n * @LastEditTime: 2022-03-27 12:33:41\n */\nimport { observe } from './observer/index'\nimport Watcher from './observer/watcher'\nimport { isFuntion } from './utils'\n\nexport function stateMixin(Vue) {\n  Vue.prototype.$watch = function(key, handler, options = {}) {\n    options.user = true\n    // console.log(this, key, handler, options, 'this, key, handler, options');\n    new Watcher(this, key, handler, options)\n  }\n}\n\nexport function initState(vm) {\n  const opts = vm.$options\n  if(opts.data) {\n    initData(vm)\n  }\n  if(opts.props) {\n\n  }\n  if(opts.watch) {\n    initWatch(vm, opts.watch)\n  }\n}\n\n\nfunction initData(vm) { // vm\n  let data  = vm.$options.data\n  // 会将data中的所有数据进行数据劫持\n  // defineProperty\n  // 判断类型\n  data = vm._data = isFuntion(data) ? data.call(vm) : data\n\n  for(let key in data) {\n    proxy(vm, '_data', key)\n  }\n  observe(data)\n}\n\n\nfunction proxy(vm, source, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[source][key]\n    },\n    set(newValue) {\n      vm[source][key] = newValue\n    }\n  })\n}\n\n\n\n\nfunction initWatch(vm, watch) {\n  for(let key in watch) {\n    const watchItem = watch[key]\n    // 不考虑多配置项.\n    if(Array.isArray(watchItem)) {\n      watchItem.forEach(item => {\n        vm.$watch(key, item)\n      })\n    } else {\n       vm.$watch(key, watchItem)\n    }\n  }\n}\n\n// 属性中的依赖既有渲染watcher 也有 用户自定义的 watcher","const unicodeRegExp = /a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD/\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z${unicodeRegExp.source}]*` // 标签名\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})` // 用来获取的名的\n// match 后的索引为1的\n\n// Regular Expressions for parsing tags and attributes\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\n// a=b a=\"b\" a='b'\nconst dynamicArgAttribute = /^\\s*((?:v-[\\w-]+:|@|:|#)\\[[^=]+?\\][^\\s\"'<>\\/=]*)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\nconst startTagOpen = new RegExp(`^<${qnameCapture}`) // 匹配开始标签\nconst startTagClose = /^\\s*(\\/?)>/ // <div/>\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`) // 匹配闭合标签\nconst doctype = /^<!DOCTYPE [^>]+>/i\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\n\n// html字符串解析成dom树 <div id=\"app\"> {{ name }} </div>\n// 将解析后的结果，组装成一个树结构 栈\n// ast 语法层面的描述\n// vdom dom节点\nlet root = null\nlet stack = []\nexport function paeserHTML(html) {\n  function advance(len) {\n    html = html.substring(len)\n  }\n  function parseStartTag() {\n    const start = html.match(startTagOpen)\n    if(start) {\n      const match = {\n        tagName: start[1],\n        attrs: []\n      }\n      advance(start[0].length)\n      // 如果没有遇到皆为标签就不停的解析\n      let end\n      let attr\n      while((!(end = html.match(startTagClose)) && (attr = html.match(attribute)))) {\n        // console.log(attr, 'attr')\n        match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] })\n        console.log(attr, '??attr')\n        console.log(html, 'ggg');\n        advance(attr[0].length)\n        console.log(html, '?啦啦啦')\n      }\n      if(end) {\n        console.log(end, 'end')\n        advance(end[0].length)\n        console.log(html, 'end')\n      }\n      return match\n    }\n    return false\n  }\n  function createAstElement(tagName, attrs) {\n    return {\n      tag: tagName,\n      type: 1,\n      children: [],\n      parent: null,\n      attrs\n    }\n  }\n  function start(tagName, attributes) {\n    let parent = stack[stack.length - 1]\n    const element = createAstElement(tagName, attributes)\n    if(!root) {\n      root = element\n    }\n    element.parent = parent // 当放入栈中时，记录父亲是谁\n    if(parent) parent.children.push(element)\n    stack.push(element)\n  }\n  function end(tagName) {\n    // 弹出...\n    let last = stack.pop()\n    console.log(last, tagName, '--------')\n    if(last.tag !== tagName) {\n      throw new Error('标签有误')\n    }\n  }\n  function chars(text) {\n    console.log(text, 'text');\n    console.log(stack, 'stack')\n    text = text.replace(/\\s/g, \"\")\n    const parent = stack[stack.length - 1]\n    // console.log(parent, 'parent')\n    if(text) {\n      parent.children.push({\n        type: 3,\n        text\n      })\n    }\n  }\n  while(html) { // 解析的内容是否存在，如果存在就不停的解析 // htmlParse2\n    let textEnd = html.indexOf('<') // 当前解析的开头\n    if(textEnd === 0) {\n       const startTagMatch = parseStartTag()\n       console.log(startTagMatch, 'startTagMatch')\n       if(startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs)\n        continue\n       }\n       const endTagMatch = html.match(endTag)\n       console.log(endTagMatch)\n       if(endTagMatch) {\n        end(endTagMatch[1])\n        advance(endTagMatch[0].length)\n        continue\n       }\n    }\n    let text // 1111</div>\n    if(textEnd > 0) {\n      console.log(html, 'html??');\n      text =  html.substring(0, textEnd)\n    }\n    if(text) {\n      chars(text)\n      advance(text.length)\n    }\n  }\n  return root\n}","/*\n * @Descripttion: \n * @version: \n * @Author: \n * @Date: 2022-03-13 11:36:34\n * @LastEditors: \n * @LastEditTime: 2022-03-28 23:44:59\n */\n// TODO 梳理整个思路。。。\n// 看一下用户是否传入了 render \n// 未传入render ，没传入可能传入的是template，如果template也没有传递\n// 将html进行词法解析（开始标签，结束标签 属性 文本）\n// ast 语法树  用来描述html语法的stack = []\n// codegen   <div>hello</div> => _c('div',{},'hello') 让字符串执行\n// eval 耗性能 会有作用域问题\n\n// 模板引擎 new Function\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\n\nexport function generate(el) {\n  console.log(el)\n  // 遍历树 将树拼接成字符串\n  let children = genChildren(el)\n  let code = `_c(\"${ el.tag }\",${el.attrs.length ? genProps(el.attrs) : 'undefined'}${ children ? `,${children}`  : '' })`\n\n  return code\n}\n\nfunction gen (el) {\n  if(el.type === 1) return generate(el)\n  // console.log(el, 'el??');\n  if(el.type === 3) {\n    let text = el.text\n    if(!defaultTagRE.test(text)) {\n      return `_v('${text}')`\n    } else {\n      // hello{{arr}}world => 'hello' + arr + 'world'\n      let tokens = []\n      let match\n      let lastIndex = defaultTagRE.lastIndex = 0\n      // console.log(text, 'text')\n      // console.log(defaultTagRE.exec(text))\n      \n      while(match = defaultTagRE.exec(text)) {\n        let index = match.index // 开始索引\n        // console.log(index, 'lastIndex')\n        if(index > lastIndex) {\n          console.log(match, 'match')\n          tokens.push(JSON.stringify(text.slice(lastIndex, index)))\n        }\n        tokens.push(`_s(${match[1].trim()})`) // JSON.stringify..\n        lastIndex = index + match[0].length\n      }\n      if(lastIndex < text.length) {\n        tokens.push(JSON.stringify(text.slice(lastIndex)))\n      }\n      return `_v(${tokens.join('+')})`\n    }\n  }\n}\n\nfunction genChildren(el) {\n  let children = el.children\n  if(children) {\n    return children.map(c => gen(c)).join(',')\n  }\n}\n\nfunction genProps(attrs) {\n  let str = ''\n  for(let i = 0; i < attrs.length; i++) {\n    let attr = attrs[i]\n    if(attr.name === 'style') {\n      let styleObj = {}\n      attr.value.replace(/([^;:]+)\\:([^;:]+)/g, function() {\n        styleObj[arguments[1]] = arguments[2]\n      })\n      attr.value = styleObj\n    }\n    str += `${attr.name}:${JSON.stringify(attr.value)},`\n  }\n  return `{${str.slice(0, -1)}}`\n}","import { paeserHTML } from './parse'\nimport { generate } from './generate'\n\nexport function compileToFunction(template) {\n  const root = paeserHTML(template)\n  console.log(root, 'root')\n  const code = generate(root)\n  console.log(code, 'code')\n  const render = new Function(`with(this){return ${code}}`) // code中会用到数据 数据在vm上\n  console.log(render.toString(), '/?')\n  // render.call(vm)\n  return render\n}\n// html => ast(只能描述语法 语法不存在的属性无法描述) => render函数 + （width + new Function）  => 虚拟dom => 生成真实dom\n// TODO with 函数 正则函数..","export function patch(oldVnode, vnode) {\n  if(oldVnode.nodeType == 1) {\n    // 真实元素\n    // 用vnode 来生成真实dom替换成原本的dom元素\n    // 删除原来的节点 然后用虚拟节点生成的dom放置到老节点的下一个节点\n    const parentElm = oldVnode.parentNode\n\n    const elm = createEle(vnode)\n    // 在第一次渲染后 删除掉节点， 下次无法获取\n    parentElm.insertBefore(elm, oldVnode.nextSibling)\n\n    parentElm.removeChild(oldVnode)\n\n    return elm\n  }\n}\n\nfunction createEle(vnode) {\n  let { tag, data, children, text, vm } = vnode\n  if(typeof vnode.tag === 'string') {\n    vnode.el = document.createElement(tag) // 虚拟节点会有一个el属性对应真实节点\n\n    children.forEach(child => {\n      vnode.el.appendChild(createEle(child))\n    })\n  } else {\n    vnode.el = document.createTextNode(text)\n  }\n  return vnode.el\n}","import Watcher from \"./observer/watcher\"\nimport { nextTick } from \"./utils\"\nimport { patch } from \"./vdom/patch\"\n\nexport function lifecycleMixin(Vue) {\n  Vue.prototype._update = function(vnode) {\n    console.log('update vnode-----', vnode)\n    // 初始化 更新\n    // 既有初始化 又有更新 比较前后差异\n    const vm = this\n    vm.$el = patch(vm.$el, vnode)\n    // 更新不需要重新的词法分析，只需要重新调用render\n    // 不管怎么样初始的html是固定的\n    // 将虚拟dom生成真实dom\n  }\n}\n\n// 后续每个组件渲染的时候都有一个watcher\nexport function mountComponent(vm, el) {\n  // 更新函数 数据变化后 会再次调用此函数\n  let updateComponent = () => {\n    // 调用render函数 生成虚拟dom\n    vm._update(vm._render()) // 后续更新可以调用updateCompoennt方法\n    // 用虚拟dom生成真实dom\n    // 重新调用render方法产生虚拟dom 目前还没有diff\n  }\n  vm.$nextTick = nextTick\n  // 观察者模式 属性是被观察者  属性页面：观察者\n  new Watcher(vm, updateComponent, () => {\n    console.log('更新视图了')\n  }, true) // 它是一个渲染watcher 后续有其他的watcher\n}","import { initState } from './state'\nimport { compileToFunction } from './compiler/index'\nimport { mountComponent } from './lifecycle'\nexport function initMixin(Vue) { // 表示在vue的基础上做一次混合操作\n  // 默认下划线是私有的\n  Vue.prototype._init = function(options) {\n    console.log(options)\n    const vm = this\n    // vue内部会对属性检测如果是$开头的就不会进行代理\n    vm.$options = options // 后面会对options进行扩展, 这里目前是用户传入的options\n\n    // 对数据进行初始化 watch computed props data\n    initState(vm) // vm 指向当前实例\n\n\n    if(vm.$options.el) {\n      vm.$mount(vm.$options.el)\n    }\n  }\n\n  Vue.prototype.$mount = function(el) {\n    const vm = this\n    const options = vm.$options\n    el = document.querySelector(el)\n    vm.$el = el\n\n    if(!options.render) {\n      let template = options.template\n      if(!template && el) {\n        template = el.outerHTML\n        // TODO 生成render函数...\n        // 渲染render...\n        // console.log(template)\n        console.log(template)\n        options.render = compileToFunction(template)\n      }\n    }\n\n    console.log(options.render, 'render...') // 调用render 渲染真实dom 替换掉页面的内容\n    mountComponent(vm, el) // 组件的挂载流程\n  }\n}\n\n\n// 把模板转化成 对应的渲染函数 =》 虚拟dom概念 vnode =》 diff 算法 更新虚拟dom => 产生真实节点，更新\n//  vm.$options render 函数 就不用将模板转为渲染函数了\n// 没有render就用template\n\n// options.render 就是渲染函数","export function createElement(vm, tagName, data = {}, ...children) {\n  // console.log(vm, tagName, data = {}, ...children, 'createElement')\n  return vnode(vm, tagName, data, data.key, children, undefined)\n}\n\nexport function createTextElement(vm ,text) {\n  // console.log(vm, text, 'createTextElement')\n    return vnode(vm, undefined, undefined, undefined, undefined, text)\n}\n\n// export function \n// TODO 虚拟DOM生成完毕...\n// TODO 整理思路!!!!\nfunction vnode(vm, tag, data, key, children, text) {\n  return {\n    vm,\n    tag,\n    data,\n    key,\n    children,\n    text\n    // ...\n  }\n}","import { createElement, createTextElement } from \"./vdom/index\"\n\nexport function renderMixin(Vue) {\n  Vue.prototype._c = function(tagName, attr, ...children) {\n    console.log(tagName, attr, children, '_c')\n    return createElement(this, ...arguments)\n  }\n  Vue.prototype._v = function(text) { // \n    // console.log(text ,'?_v')\n    return createTextElement(this, text)\n  }\n  Vue.prototype._s = function(val) {\n    // return this[val]\n    if(typeof val === 'object') return JSON.stringify(val)\n    return val\n  }\n\n  Vue.prototype._render = function() {\n    const vm = this\n    let render = vm.$options.render // 解析出来的render方法\n    // 也有可能是用户写的\n    let vnode = render.call(vm)\n    // TODO _v _c 等方法没有\n    // console.log('render');\n    // 生成虚拟dom\n    return vnode\n  }\n}","import { initMixin } from './init'\nimport { lifecycleMixin } from './lifecycle'\nimport { renderMixin } from './render'\nimport { stateMixin } from './state'\nfunction Vue(options) {\n  // options 为用户传入的选项\n  this._init(options)\n}\n\ninitMixin(Vue)\nrenderMixin(Vue)\nlifecycleMixin(Vue)\nstateMixin(Vue)\n// renderMixin() // _render\n// lifecycleMixin() // _update\n\nexport default Vue"],"names":["isFuntion","data","isObject","val","flushCallBacks","callbacks","forEach","cb","watting","timerFn","Promise","resolve","then","MutationObserver","textNode","document","createTextNode","observe","characterData","textContent","setImmediate","setTimeout","nextTick","push","arrayMethods","Object","create","Array","prototype","oldArrayPrototype","methods","method","console","log","args","result","call","addList","concat","__ob__","observeArray","dep","notify","id","Dep","subs","target","addDep","watcher","item","update","pushTarget","popTarget","Observe","defineProperty","value","enumerable","isArray","__proto__","walk","keys","key","defineReactive","dependArray","depend","childOb","get","set","queue","has","pedding","flushSchedulerQueue","run","queueWacther","Watcher","vm","exprOrFn","options","getter","split","reduce","total","cur","deps","depsId","Set","newVal","user","add","addSub","stateMixin","Vue","$watch","handler","initState","opts","$options","initData","props","watch","initWatch","_data","proxy","source","newValue","watchItem","unicodeRegExp","ncname","qnameCapture","attribute","startTagOpen","RegExp","startTagClose","endTag","root","stack","paeserHTML","html","advance","len","substring","parseStartTag","start","match","tagName","attrs","length","end","attr","name","createAstElement","tag","type","children","parent","attributes","element","last","pop","Error","chars","text","replace","textEnd","indexOf","startTagMatch","endTagMatch","defaultTagRE","generate","el","genChildren","code","genProps","gen","test","tokens","lastIndex","exec","index","JSON","stringify","slice","trim","join","map","c","str","i","styleObj","arguments","compileToFunction","template","render","Function","toString","patch","oldVnode","vnode","nodeType","parentElm","parentNode","elm","createEle","insertBefore","nextSibling","removeChild","createElement","child","appendChild","lifecycleMixin","_update","$el","mountComponent","updateComponent","_render","$nextTick","initMixin","_init","$mount","querySelector","outerHTML","undefined","createTextElement","renderMixin","_c","_v","_s"],"mappings":"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"}